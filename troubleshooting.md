---
layout: default
title: 故障排除
---

# 故障排除

本文档提供常见问题的解决方案以及错误排查指南。

## 常见问题

### 创建沙盒失败

**问题描述**：调用创建沙盒API后，沙盒状态为ERROR或长时间停留在CREATING状态。

**可能原因**：
- AWS资源配额不足
- 指定的镜像ID不存在或已损坏
- 网络连接问题
- 权限不足

**解决方案**：
1. 检查API响应中的错误信息，了解具体失败原因
2. 确认镜像ID正确且状态正常
3. 检查网络连接是否稳定
4. 联系管理员确认账户资源配额和权限

### 无法连接沙盒

**问题描述**：沙盒状态为RUNNING，但无法通过MCP或VNC URL访问。

**可能原因**：
- 沙盒内部服务未启动
- 网络防火墙限制
- 初始化过程未完成

**解决方案**：
1. 检查沙盒状态，确保为RUNNING状态
2. 等待几分钟，让初始化过程完成
3. 使用手动初始化API触发初始化
4. 检查网络配置，确保端口开放

### 沙盒性能问题

**问题描述**：沙盒响应缓慢或不稳定。

**可能原因**：
- 资源不足（CPU、内存）
- 网络延迟
- 磁盘I/O瓶颈

**解决方案**：
1. 使用更高规格的实例配置
2. 检查沙盒资源使用情况，识别瓶颈
3. 优化应用程序配置

## 错误码参考

### 通用错误码

- `400`: 请求参数错误
- `401`: 未授权
- `403`: 无权限访问
- `404`: 资源不存在
- `500`: 服务器内部错误

### 沙盒管理特定错误

- `SB-001`: 镜像ID不存在
- `SB-002`: 创建EC2实例失败
- `SB-003`: 初始化过程失败
- `SB-004`: 沙盒资源配额超限
- `SB-005`: 沙盒已存在
- `SB-006`: 实例规格不支持

### 镜像管理特定错误

- `IMG-001`: 源沙盒状态不正确
- `IMG-002`: 创建AMI失败
- `IMG-003`: 镜像名称已存在
- `IMG-004`: 镜像创建超时
- `IMG-005`: 用户镜像配额超限

## 日志分析

系统日志是定位和解决问题的有效工具。以下是关键日志及其分析方法：

### 系统日志

系统运行日志记录了API调用、资源创建等重要信息。对应的日志位于：
- 沙盒创建日志：`/var/log/sandboxmanager/sandbox-creation.log`
- API请求日志：`/var/log/sandboxmanager/api-requests.log`
- 错误日志：`/var/log/sandboxmanager/error.log`

常见日志分析工具：
- 使用grep过滤关键信息：`grep "ERROR" /var/log/sandboxmanager/error.log`
- 使用tail实时查看日志：`tail -f /var/log/sandboxmanager/sandbox-creation.log`

### 沙盒实例日志

沙盒实例内部的日志对排查初始化和运行问题很有帮助：
- 系统日志：`/var/log/syslog`
- 初始化脚本日志：`/var/log/cloud-init-output.log`
- 应用服务日志：`/var/log/application/`

## 联系支持

如果您无法解决问题，请联系技术支持团队获取帮助。

### 提交支持请求

提交支持请求时，请提供以下信息：
1. 沙盒ID或镜像ID
2. 问题详细描述
3. 错误信息和错误码
4. 重现问题的步骤
5. 相关日志片段

### 联系方式

- 电子邮件：support@sandbox-manager.example.com
- 支持热线：+86-10-88888888
- 服务时间：工作日 9:00-18:00 